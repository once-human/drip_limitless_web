<?php if (Wo_IsMobile() == false) { ?>
<div class="tag_ap">
	<div class="tag_audio_player">
		<div id="waveform--<?php echo $wo['media']['storyId'];?>"></div>
		<div id="audio--<?php echo $wo['media']['storyId'];?>"></div>
	</div>
	<div class="valign tag_audio_play cont_hide" id="acont--<?php echo $wo['media']['storyId'];?>">
		<button class="btn" id="sback-<?php echo $wo['media']['storyId'];?>">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="26" height="26"><path fill="currentColor" d="M11.99 5V2.21c0-.45-.54-.67-.85-.35L7.35 5.65c-.2.2-.2.51 0 .71l3.79 3.79c.31.31.85.09.85-.35V7c3.73 0 6.68 3.42 5.86 7.29-.47 2.27-2.31 4.1-4.57 4.57-3.57.75-6.75-1.7-7.23-5.01-.06-.48-.48-.85-.98-.85-.6 0-1.08.53-1 1.13.62 4.39 4.8 7.64 9.53 6.72 3.12-.61 5.63-3.12 6.24-6.24.99-5.13-2.9-9.61-7.85-9.61zm-1.1 11h-.85v-3.26l-1.01.31v-.69l1.77-.63h.09V16zm4.28-1.76c0 .32-.03.6-.1.82s-.17.42-.29.57-.28.26-.45.33-.37.1-.59.1-.41-.03-.59-.1-.33-.18-.46-.33-.23-.34-.3-.57-.11-.5-.11-.82v-.74c0-.32.03-.6.1-.82s.17-.42.29-.57.28-.26.45-.33.37-.1.59-.1.41.03.59.1.33.18.46.33.23.34.3.57.11.5.11.82v.74zm-.85-.86c0-.19-.01-.35-.04-.48s-.07-.23-.12-.31-.11-.14-.19-.17-.16-.05-.25-.05-.18.02-.25.05-.14.09-.19.17-.09.18-.12.31-.04.29-.04.48v.97c0 .19.01.35.04.48s.07.24.12.32.11.14.19.17.16.05.25.05.18-.02.25-.05.14-.09.19-.17.09-.19.11-.32.04-.29.04-.48v-.97z"></path></svg>
		</button>
		<button class="btn" id="play-<?php echo $wo['media']['storyId'];?>" onclick="$(this).toggleClass('play_pause');">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="45" height="45"><path fill="currentColor" opacity=".3" d="M12,22A10,10,0,1,1,22,12,10.01177,10.01177,0,0,1,12,22Z"></path><path fill="currentColor" d="M10,16.89062A2.00839,2.00839,0,0,1,8,14.8877V9.1123a2.00085,2.00085,0,0,1,3-1.73242l5,2.8877a2.00064,2.00064,0,0,1,0,3.46484l-5,2.8877A1.99618,1.99618,0,0,1,10,16.89062Z"></path></svg>
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="45" height="45" class="active_svg"><circle cx="12" cy="12" r="10" fill="currentColor" opacity=".3"></circle><path fill="currentColor" d="M10 17a.99943.99943 0 0 1-1-1V8a1 1 0 0 1 2 0v8A.99943.99943 0 0 1 10 17zM14 17a.99943.99943 0 0 1-1-1V8a1 1 0 0 1 2 0v8A.99943.99943 0 0 1 14 17z"></path></svg>
		</button>
		<button class="btn" id="sforw-<?php echo $wo['media']['storyId'];?>" onclick="$(this).toggleClass('play_pause');">
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="26" height="26"><path fill="currentColor" d="M3 10v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71V6.41c0-.89-1.08-1.34-1.71-.71L7 9H4c-.55 0-1 .45-1 1zm13.5 2c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 4.45v.2c0 .38.25.71.6.85C17.18 6.53 19 9.06 19 12s-1.82 5.47-4.4 6.5c-.36.14-.6.47-.6.85v.2c0 .63.63 1.07 1.21.85C18.6 19.11 21 15.84 21 12s-2.4-7.11-5.79-8.4c-.58-.23-1.21.22-1.21.85z"></path></svg>
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="26" height="26" class="active_svg"><path fill="currentColor" d="M3.63 3.63c-.39.39-.39 1.02 0 1.41L7.29 8.7 7 9H4c-.55 0-1 .45-1 1v4c0 .55.45 1 1 1h3l3.29 3.29c.63.63 1.71.18 1.71-.71v-4.17l4.18 4.18c-.49.37-1.02.68-1.6.91-.36.15-.58.53-.58.92 0 .72.73 1.18 1.39.91.8-.33 1.55-.77 2.22-1.31l1.34 1.34c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.05 3.63c-.39-.39-1.02-.39-1.42 0zM19 12c0 .82-.15 1.61-.41 2.34l1.53 1.53c.56-1.17.88-2.48.88-3.87 0-3.83-2.4-7.11-5.78-8.4-.59-.23-1.22.23-1.22.86v.19c0 .38.25.71.61.85C17.18 6.54 19 9.06 19 12zm-8.71-6.29l-.17.17L12 7.76V6.41c0-.89-1.08-1.33-1.71-.7zM16.5 12c0-1.77-1.02-3.29-2.5-4.03v1.79l2.48 2.48c.01-.08.02-.16.02-.24z"></path></svg>
		</button>
	</div>

	<script>
	var wavesurfer = WaveSurfer.create({
		container: '#audio--<?php echo $wo['media']['storyId'];?>',
		<?php if ($wo['language_type'] == 'rtl') { ?>
		<?php } else { ?>
		plugins: [
			WaveSurfer.cursor.create({
				showTime: true,
				opacity: 1,
				customShowTimeStyle: {
					'background-color': '#000',
					color: '#fff',
					padding: '2px',
					'font-size': '10px'
				}
			})
		],
		<?php } ?>
		<?php if ($_COOKIE['mode'] == 'night') { ?>
			waveColor: 'rgba(255, 255, 255, 0.1)',
		<?php } else { ?>
			waveColor: 'rgba(0, 0, 0, 0.1)',
		<?php } ?>
		progressColor: '<?php echo $wo['config']['btn_background_color'];?>',
		barWidth: 3,
		barRadius: 3,
		barGap: 3,
		height: 70,
		skipLength: 10,
		<?php if ($wo['config']['cloud_upload'] == 1) { ?>
		backend: 'MediaElement',
		<?php } ?>
		responsive: true,
		<?php if ($wo['language_type'] == 'rtl') { ?>
		rtl: true,
		<?php } ?>
		<?php if ($wo['config']['cloud_upload'] == 1) { ?>
		xhr: {
			mode: 'no-cors'
		}
		<?php } ?>
	});
	wavesurfer.load('<?php echo $wo['media']['filename'];?>');

	wavesurfer.on('loading', function (integer) {
		$('#waveform--<?php echo $wo['media']['storyId'];?>').html('<div class="valign"><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div><div class="skel skel_waveform"></div></div>');
	});

	wavesurfer.on('ready', function () {
		$('#waveform--<?php echo $wo['media']['storyId'];?>').remove();
		$('#acont--<?php echo $wo['media']['storyId'];?>').removeClass('cont_hide');
	});

	var buttonBack = document.getElementById('sback-<?php echo $wo['media']['storyId'];?>');
	buttonBack.addEventListener('click', wavesurfer.skipBackward.bind(wavesurfer));

	var buttonForw = document.getElementById('sforw-<?php echo $wo['media']['storyId'];?>');
	buttonForw.addEventListener('click', wavesurfer.toggleMute.bind(wavesurfer));

	var buttonPlay = document.getElementById('play-<?php echo $wo['media']['storyId'];?>');
	buttonPlay.addEventListener('click', wavesurfer.playPause.bind(wavesurfer));
	</script>
</div>
<?php } else { ?>
<div class="tag_ap">
	<audio controls preload="auto" style="width: 100%;">
		<source src="<?php echo $wo['media']['filename'];?>" type="audio/mpeg">
		<source src="<?php echo $wo['media']['filename'];?>" type="audio/mp3">
	</audio>
</div>
<?php } ?>